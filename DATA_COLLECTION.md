# 数据收集建议

## 建议运行时长

### 最小时长
- **2-4小时**：获得基本的价差波动模式
- 覆盖至少1个美股交易时段

### 理想时长
- **12-24小时**：包含多个交易时段
- 能看到日内波动规律

### 最佳时长
- **3-7天**：覆盖整周
- 可以看到周内规律性

## 重点观察指标

### 策略1：收敛策略（两边市价）
需要观察：
- ✅ 价差是否会缩小（收敛）
- ✅ 收敛频率和幅度
- ✅ 从最大到最小需要多久
- ❌ 是否会持续扩大

**判断标准**：
- 如果价差经常收敛：可以做
- 如果价差持续扩大：别做

### 策略2：反转策略（挂单+市价）
需要观察：
- ✅ 优势方向切换频率
- ✅ 单一方向持续时间
- ✅ 反转后新方向持续多久
- ❌ 价差是否永不反转

**判断标准**：
- 如果频繁反转(每1-10分钟)：可以做
- 如果长时间单向(>30分钟)：风险高
- 如果完全不反转：别做

## 当前监控增强功能

### 新增显示
1. **价差变化趋势**：📈/📉 显示相比上次的变化
2. **优势方向持续时间**：显示当前方向已维持多久
3. **策略信号**：
   - 收敛信号：价差是否在缩小
   - 反转信号：是否刚发生方向切换

### 数据记录
所有数据已自动记录到 `spread_history.csv`，包括：
- 两个市场的完整价格
- 两个方向的可执行价差
- 扣费后净利润
- 时间戳

## 运行方式

```bash
# 后台运行并记录日志
nohup python3 spread_monitor.py > monitor.log 2>&1 &

# 查看进程
ps aux | grep spread_monitor

# 查看实时输出
tail -f monitor.log

# 停止监控
pkill -f spread_monitor
```

## 分析工具

数据收集后使用：

```bash
# 基础分析
python3 analyze_spread.py

# 反转分析
python3 quick_reversal_check.py
```

## 注意事项

1. **磁盘空间**：CSV文件会持续增长
   - 2秒刷新：每小时约1800条记录
   
2. **API限流**：注意Hyperliquid的速率限制

3. **网络稳定**：确保运行期间网络稳定

4. **时区问题**：注意美股交易时间
   - 美股开盘：北京时间21:30-04:00
